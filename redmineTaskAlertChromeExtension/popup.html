<!DOCTYPE html>
<html>
  <head>
    <title>Redmine task alert</title>
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
    />
    <style>
      .nice-select{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:#fff;border-radius:5px;border:solid 1px #e8e8e8;box-sizing:border-box;clear:both;cursor:pointer;display:block;float:left;font-family:inherit;font-size:14px;font-weight:normal;height:38px;line-height:36px;outline:none;padding-left:18px;padding-right:30px;position:relative;text-align:left !important;transition:all .2s ease-in-out;user-select:none;white-space:nowrap;width:auto}.nice-select:hover{border-color:#dbdbdb}.nice-select:active,.nice-select.open,.nice-select:focus{border-color:#999}.nice-select:after{border-bottom:2px solid #999;border-right:2px solid #999;content:"";display:block;height:5px;margin-top:-4px;pointer-events:none;position:absolute;right:12px;top:50%;transform-origin:66% 66%;transform:rotate(45deg);transition:all .15s ease-in-out;width:5px}.nice-select.open:after{transform:rotate(-135deg)}.nice-select.open .nice-select-dropdown{opacity:1;pointer-events:auto;transform:scale(1) translateY(0)}.nice-select.disabled{border-color:#ededed;color:#999;pointer-events:none}.nice-select.disabled:after{border-color:#ccc}.nice-select.wide{width:100%}.nice-select.wide .nice-select-dropdown{left:0 !important;right:0 !important}.nice-select.right{float:right}.nice-select.right .nice-select-dropdown{left:auto;right:0}.nice-select.small{font-size:12px;height:36px;line-height:34px}.nice-select.small:after{height:4px;width:4px}.nice-select.small .option{line-height:34px;min-height:34px}.nice-select .nice-select-dropdown{margin-top:4px;background-color:#fff;border-radius:5px;box-shadow:0 0 0 1px rgba(68,68,68,.11);pointer-events:none;position:absolute;top:100%;left:0;transform-origin:50% 0;transform:scale(0.75) translateY(19px);transition:all .2s cubic-bezier(0.5, 0, 0, 1.25),opacity .15s ease-out;z-index:9;opacity:0}.nice-select .list{border-radius:5px;box-sizing:border-box;overflow:hidden;padding:0;max-height:210px;overflow-y:auto}.nice-select .list:hover .option:not(:hover){background-color:transparent !important}.nice-select .option{cursor:pointer;font-weight:400;line-height:40px;list-style:none;outline:none;padding-left:18px;padding-right:29px;text-align:left;transition:all .2s}.nice-select .option:hover,.nice-select .option.focus,.nice-select .option.selected.focus{background-color:#f6f6f6}.nice-select .option.selected{font-weight:bold}.nice-select .option.disabled{background-color:transparent;color:#999;cursor:default}.nice-select .optgroup{font-weight:bold}.no-csspointerevents .nice-select .nice-select-dropdown{display:none}.no-csspointerevents .nice-select.open .nice-select-dropdown{display:block}.nice-select .list::-webkit-scrollbar{width:0}.nice-select .has-multiple{white-space:inherit;height:auto;padding:7px 12px;min-height:36px;line-height:22px}.nice-select .has-multiple span.current{border:1px solid #ccc;background:#eee;padding:0 10px;border-radius:3px;display:inline-block;line-height:24px;font-size:14px;margin-bottom:3px;margin-right:3px}.nice-select .has-multiple .multiple-options{display:block;line-height:24px;padding:0}.nice-select .nice-select-search-box{box-sizing:border-box;width:100%;padding:5px;pointer-events:none;border-radius:5px 5px 0 0}.nice-select .nice-select-search{box-sizing:border-box;background-color:#fff;border:1px solid #e8e8e8;border-radius:3px;color:#444;display:inline-block;vertical-align:middle;padding:7px 12px;margin:0 10px 0 0;width:100%;min-height:36px;line-height:22px;height:auto;outline:0 !important;font-size:14px}
      
      /* Modal Structure */

      html, body {
        font-family: "Menlo", monospace;
        font-size: 16px;
        margin: 0;
        padding: 0;
        min-width: 700px;
        min-height: 600px;
        /* background-color: rgb(241, 241, 241); */
      }

      h1 {
        font-size: 1.6rem;
        font-weight: 400;
        margin: 0;
        color: #2f5876;
        text-align: center;
      }

      h2 {
        font-size: 1.2rem;
        margin: 1rem 0 1rem 0;
        text-align: center;
      }

      hr {
        /* border-top: 7.5px dotted red; */
        /* border-width: 7.5px; */
        border-width: 1px;
        border-top-color: #5b8fb4;
      }

      img {
        width: 3rem;
      }

      .modal-header {
        align-items: center;
        border-bottom: 0.5px solid #dadada;
      }

      #introductionText {
        margin: auto 8rem;
        font-size: 0.8rem;
        text-align: justify;
      }

      .modal-icons {
        border-top: 0.5px solid #dadada;
        height: 50px;
        width: 100%;
      }

      .logo {
        padding: 16px;
      }

      .logo-icon {
        vertical-align: text-bottom;
      }

      #version {
        color: #444;
        font-size: 0.7rem;
      }

      #version:hover {
        outline: 1px solid gray;
        cursor: pointer;
      }

      .flex-container-createAlert {
        display: flex;
        /* justify-content: space-between; */
        padding: 0.5rem 1rem;
        background-image: linear-gradient(62deg, #fcd5be 0%, #dee1fc 100%);
        border-radius: 4px;
        margin-bottom: 1rem;
      }

      .flex-container-activeAndTriggeredAlert {
        display: flex;
        /* justify-content: space-between; */
        padding: 0.5rem 1rem;
        background-image: linear-gradient(62deg, #f9ffa7 0%, #ffcc8a 100%);
        border-radius: 4px;
        margin-bottom: 0.3rem;
      }

      .flex-container-child-createAlert {
        display: flex;
        flex-direction: column;
        padding: 0 0.8rem;
        align-items: center;
        opacity: 1;
        transition: opacity 0.2s ease-in-out;
      }

      label {
        padding-right: 0.3rem;
        padding-bottom: 0.25rem;
        font-size: 0.9rem;
        font-weight: bold;
      }

      select, input {
        padding: 0.1rem 0.5rem;
        border: 1px solid #dadada;
        outline: none;
        border-radius: 4px;
        color: #444;
        height: 31px;
      }

      select, input, .nice-select {
        font-size: 0.85rem!important;
      }

      input {
        width: 4rem;
        letter-spacing: 0.075rem;
        text-align: center;
      }

      button {
        border-radius: 4px;
        border: 1px solid rgb(83, 83, 83);
        outline: none;
        background-color: rgb(102, 228, 144);
        color: rgb(255, 255, 255);
        font-size: 1.2rem;
        font-weight: bold;
        margin: auto;
      }

      .activeAlertDelete {
        background-color: rgb(255 128 128);
      }

      .activeAlertDelete:hover {
        background-color: rgb(253, 180, 180);
      }

      .activeAlertDelete:active {
        background-color: rgb(196, 82, 82);
      }

      button:hover {
        background-color: rgb(158, 240, 185);
        cursor: pointer;
      }

      button:active {
        background-color: rgb(80, 206, 122);
      }

      button:disabled {
        background-color: #dadada;
      }

      .validationFailedRedBorder {
        outline: 2px solid red;
      }

      #triggeredSpan, #createSpan {
        text-decoration: underline;
        text-decoration-thickness: 3px;
        text-underline-offset: 5px;
      }

      #createSpan {
        text-decoration-color: lightgreen;
      }

      #activeSpan {
        position: relative;
      }
        
      #activeSpan::before,
      #activeSpan::after {
        content: "";
        position: absolute;
        top: -0.4rem;
        left: -0.35rem;
        right: -0.35rem;
        bottom: -0.4rem;
        border: 3px solid rgb(255, 231, 123);
        transition: all .5s;
        animation: clippath 3s infinite linear;
        border-radius: 4px;
      }
        
      #activeSpan::after {
        animation: clippath 3s infinite -1.5s linear;
      }

      @keyframes clippath {
          0%,
          100% {
              clip-path: inset(0 0 94% 0);
          }
          
          25% {
              clip-path: inset(0 94% 0 0);
          }
          50% {
              clip-path: inset(94% 0 0 0);
          }
          75% {
              clip-path: inset(0 0 0 94%);
          }
      }

      #triggeredSpan {
        text-decoration-color: gray;
      }

      .nice-select {
        min-width: 230px;
      }

      .displayNone {
        display: none;
      }

    </style>
    <script type="module" src="popup.js"></script>
  </head>

  <body>
    <div>
      <div class="modal-header">
        <h1 class="logo">
          <img class="logo-icon" src="originalImage.png" />
          Redmine task notifications
          <span id="version" title="Click to clear cache">v1.0.0</span>
        </h1>
      </div>
      <div class="modal-content" id="introductionText">
        <p>
          Select task ID, the desired field and its value. When the selected criteria is trigerred -
          you will receive a notification.
          Alerts sync accross devices that share the same google account.
        </p>
      </div>

      <hr />

      <!-- Create an alert -->
      <div class="modal-content">
        <h2><span id="createSpan">Create</span> an alert</h2>
      </div>

      <section id="createAlert">
        <div class="flex-container-createAlert">
          <div class="flex-container-child-createAlert">
            <label for="task_id_input">Task ID</label>
            <input type="text" id="task_id_input" name="task_id_input" pattern="[0-9]{6}" minlength="5" maxlength="5" required />
          </div>

          <div class="flex-container-child-createAlert">
            <label for="field">Field</label>
            <select name="field" id="field" class="small" required></select>
          </div>

          <div class="flex-container-child-createAlert">
            <label for="addValue">Value</label>
            <select name="addValue" id="addValue" class="small" required></select>
          </div>

          <div class="flex-container-child-createAlert">
            <label for="addButton">Create</label>
            <button name="addButton" id="addButton">+</button>
          </div>
        </div>
      </section>

      <section id="createAlertWarning" class="displayNone">
        <div class="flex-container-createAlert" style="justify-content: center;">
          <div class="flex-container-child-createAlert">
            <h5>Please navigate to a Redmine task page to add new alerts :)</h5>
          </div>
      </section>

      <hr />

      <!-- Active alerts -->
      <div class="modal-content">
        <h2><span id="activeSpan">Active</span> alerts</h2>
      </div>

      <section class="activeAlerts">
        <div id="activeAlertsList">
          <!-- <div class="activeAlert flex">
            <div id="activeAlertId"></div>
            <div id="activeAlertField"></div>
            <div id="activeAlertValue"></div>
            <div id="activeAlertDelete"></div>
            </div> -->
        </div>
      </section>

      <hr />

      <!-- Triggered alerts -->
      <div class="modal-content">
        <h2><span id="triggeredSpan">Triggered</span> alerts</h2>
      </div>

      <section class="triggeredAlerts">
        <div id="triggeredAlertsList">
          <!-- <div class="activeAlert flex">
            <div id="activeAlertId"></div>
            <div id="activeAlertField"></div>
            <div id="activeAlertValue"></div>
            <div id="activeAlertDelete"></div>
            </div> -->
        </div>
      </section>

  </div>

  </body>
</html>
